<!doctype html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>Chess</title>
	<script src="js/jquery-1.11.0.min.js"></script>
	<script src="js/chess.js"></script>
</head>
<body>
	<script>
		ch = Chess({ append: 'body' });
		// test
		// ch.right.add('name', function (el) {
		//	 console.log(el.start);
		// });
		ch.type.add('Пешка');
		ch.type.add('Слон');
		ch.type.add('Ферзь');
		ch.type.add('Король');
		ch.type.add('Ладья');
		ch.type.add('Конь');
		
		
		for (var i = 1; i < 9; i++) {
			ch.element.add('Пешка', [2, i]);
			ch.element.add('Пешка', [7, i]);
		}
		//добавление ладьи
		ch.element.add('Ладья',[8,1]);
		ch.element.add('Ладья',[8,8]);
		ch.element.add('Ладья',[1,1]);
		ch.element.add('Ладья',[1,8]);
		//добавление коня
		ch.element.add('Конь',[8,2]);
		ch.element.add('Конь',[8,7]);
		ch.element.add('Конь',[1,2]);
		ch.element.add('Конь',[1,7]);
		
		ch.right.add('Шаг', function (el, new_pos) {
			if ( el.start[0] == 7 && ( el.position[0] + 1 == new_pos[0] ) && ( el.position[1] == new_pos[1] ) ) 
			console.log('элемент сдвинулся вверх "'+new_pos+'"')
			return true;
			if ( el.start[0] == 2 && ( el.position[0] - 1 == new_pos[0] ) && ( el.position[1] == new_pos[1] ) ) {
			console.log ('элемент сдвинулся вниз "'+new_pos+'"' )
			return true;}
			return false;
			
		});
		
		ch.right.add('Шаг + 2', function (el, new_pos) {
		
			if((el.position[0]+ 2 == new_pos[0]) && (el.position[1] == new_pos[1]) && (el.start == el.position)) {
				return true;
			}
			return false;
		});
		ch.type.addRight('Пешка', ['Шаг', 'Шаг + 2'])
		
		
		ch.right.add('Ход по вертикали',function (el, new_pos){
			for (var i = 1; i < 9; i++) {
				if ( (el.start[0] == 1 || 8) && (el.position[0] + i == new_pos[0] || el.position[0] - i == new_pos[0]) && el.position[1] == new_pos[1])
					return true;				
			}
			return false;
		});
		
		ch.right.add('Ход по горизонтали', function (el,new_pos) {
			for (var i = 1; i < 9; i++ ) {
				if ((el.start[0] == 1 && el.position[0] == new_pos[0]) && (el.position[1] + [i] == new_pos[1]))
					return true;
				if ((el.start[0] == 8 && el.position[0] == new_pos[0]) && (el.position[1] + [i] == new_pos[1]))
					return true;	
			}
			return false;		
		});
		ch.type.addRight('Ладья', ['Ход по вертикали','Ход по горизонтали'])
		
		ch.right.add ('Ход буквой г', function (el,new_pos) {
			if (el.start[0] == 1 && (el.position[0] - 2 == new_pos[0]) && (el.position[1] - 1 || el.position[1] + 1) == new_pos[1]){
				return true;
			}
			if (el.start[0] == 1 && (el.position[0] - 1 == new_pos[0]) && (el.position[1] - 2 || el.position[1] + 2) == new_pos[1]){
				return true;
			}
			if (el.start[0] == 8 && (el.position[0] + 2 == new_pos[0]) && (el.position[1] + 1 || el.position[1] - 1) == new_pos[1]){
				return true;
			}
			if (el.start[0] == 8 && (el.position[0] + 1 == new_pos[0]) && (el.position[1] + 2 || el.position[1] - 2) == new_pos[1]){
				return true;
			}	
			return false;
		});
		ch.type.addRight('Конь',['Ход буквой г'])
			
			

		
	</script>
</body>
</html>
